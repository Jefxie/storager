"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var enjson=function(e){try{return JSON.stringify({value:e})}catch(e){return"Err: JSON stringify Error"}},dejson=function(e){try{var t=JSON.parse(e);return t&&t.value}catch(e){return"Err: JSON parse Error"}},storage2map=function(e){var t=new Map;for(var r in e)t.set(r,e[r]);return t},getKeys=function(e,t){return _toConsumableArray(storage2map(e).keys()).filter(function(e){return e.startsWith(t)})},Storager=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"$",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"localStorage";_classCallCheck(this,r),this.secret=e+":",this.storage=window[t]}return _createClass(r,[{key:"get",value:function(e){var t=this._merge(e),r=t.storage,n=t.keys;return dejson(r.getItem(n))}},{key:"set",value:function(e,t){var r=this._merge(e),n=r.storage,o=r.keys;n.setItem(o,enjson(t))}},{key:"del",value:function(e){var t=this._merge(e),r=t.storage,n=t.keys;r.removeItem(n)}},{key:"has",value:function(e){return!!this.get(e)}},{key:"keys",value:function(){var t=this.secret,e=this.storage;return getKeys(e,t).map(function(e){return e.replace(t,"")})}},{key:"values",value:function(){var e=this.secret,r=this.storage;return getKeys(r,e).reduce(function(e,t){return _toConsumableArray(e).concat([dejson(r[t])])},[])}},{key:"clear",value:function(){var e=this.secret;this.removeAll(e)}},{key:"removeAll",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=this.storage,r=getKeys(t,e),n=!0,o=!1,a=void 0;try{for(var i,s=r[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=i.value;t.removeItem(u)}}catch(e){o=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}}},{key:"_merge",value:function(e){return{keys:this.secret+e,storage:this.storage}}}]),r}();function Cookies(e,t,r){if(!e||!t){var n={};for(var o in all())n[o]=JSON.parse(decodeURIComponent(all()[o])).value;return e?n[e]:n}set$1(e,t,r)}function set$1(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,n=new Date;if(n.setTime(n.getTime()+24*r*3600*1e3),!t)return null==decodeURIComponent(all()[e])?decodeURIComponent(all()[e]):null;var o=encodeURIComponent(e),a=encodeURIComponent(JSON.stringify({value:t})),i=null==r?"":";expires="+n.toGMTString();document.cookie="".concat(o,"=").concat(a).concat(i)}function all(){var e={};if(document.cookie){var t=document.cookie.split("; ");for(var r in t){var n=t[r].indexOf("="),o=t[r].substr(0,n),a=t[r].substr(n+1,t[r].length);e[o]=a}}return e}Cookies.remove=function(e){if(all()[e])document.cookie=e+"=; max-age=0";else{var t=all();for(var r in t)document.cookie=r+"=; max-age=0"}};var Main=function(e){function n(e,t){var r;return _classCallCheck(this,n),(r=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,e,t))).cookies=r.createCookies(),r}return _inherits(n,Storager),_createClass(n,[{key:"createCookies",value:function(){return new Cookies}},{key:"createStorage",value:function(e,t){return new Storager(e,t)}}]),n}(),main=new Main("$","localStorage");module.exports=main;
